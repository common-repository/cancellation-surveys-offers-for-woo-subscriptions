document.cancellationOffersAndSurveys={},document.cancellationOffersAndSurveys.bindCheckboxContentShowHideEvent=function($checkbox,$content){$checkbox.on("change",function(){$checkbox.is(":checked")?$content.show():$content.hide()}.bind(this)).trigger("change")},jQuery(document).ready(function(){let tabs=jQuery(".cos-offer-and-survey-form-tab"),tabsContent=jQuery(".cos-offer-and-survey-form-tab-content");tabs.click(function(e){e.preventDefault(),tabsContent.removeClass("cos-offer-and-survey-form-tab-content--active"),tabs.removeClass("cos-offer-and-survey-form-tab--active"),jQuery(this).addClass("cos-offer-and-survey-form-tab--active");e=jQuery(this).data("target");jQuery("#"+e).addClass("cos-offer-and-survey-form-tab-content--active")})}),jQuery(document).ready(function(){jQuery(".cos-offer-and-survey-helping__close").click(function(){jQuery(this).parent().hide()})}),jQuery(document).ready(function($){document.cancellationOffersAndSurveys&&document.cancellationOffersAndSurveys.bindCheckboxContentShowHideEvent($("#cancellation-offer-discount-offer-tab__is-enabled").find("input[type=checkbox]"),$("#cancellation-offer-discount-offer-tab__inner-options"))}),jQuery(document).ready(function($){jQuery(".cos-select-woo").selectWoo(),jQuery("#cancellation-offer-limitations-tab--exclusions-toggle").click(function(){jQuery("#cancellation-offer-limitations-tab-exclusions").toggle(),jQuery("#cancellation-offer-limitations-tab--exclusions-toggle-up").toggle(),jQuery("#cancellation-offer-limitations-tab--exclusions-toggle-down").toggle()})}),jQuery(document).ready(function($){document.cancellationOffersAndSurveys&&(document.cancellationOffersAndSurveys.bindCheckboxContentShowHideEvent($("#cancellation-offer-survey-tab__is-enabled").find("input[type=checkbox]"),$("#cancellation-offers-survey__inner-options")),document.cancellationOffersAndSurveys.bindCheckboxContentShowHideEvent($("#cancellation-offers-survey__other-survey-option-is-enabled").find("input[type=checkbox]"),$("#cancellation-offers-survey__other-survey-option-inner-options")),new function($tab){this.$tab=$tab,this.init=function(){this.$wrapper=this.$tab.find("#cancellation-offers-survey__survey-options"),this.$addNewButton=this.$wrapper.find("#cancellation-offers-survey__survey-add-new"),this.$addNewButton.on("click",function(event){event.preventDefault(),this.$wrapper.find(".cancellation-offers-survey__survey-items").append(this.generateNewOption()),this.recalculateSurveyItemsIndexes()}.bind(this)),this.$wrapper.on("click",function(){jQuery("#cancellation-offer-discount-offer-tab__survey-options-notice").show()}),jQuery(document).on("click",".cancellation-offers-survey__survey-item__actions--remove",function(event){event.preventDefault(),this.getOptionsCount()<3?alert("Minimum options for the survey is 2"):(jQuery(event.target).closest(".cancellation-offers-survey__survey-item").remove(),this.recalculateSurveyItemsIndexes())}.bind(this))},this.getOptionsCount=function(){return this.$wrapper.find(".cancellation-offers-survey__survey-items > .cancellation-offers-survey__survey-item").length},this.generateNewOption=function(){var option=this.$wrapper.find(".cancellation-offers-survey__survey-item").last().clone();return option.find("input[type=text]").val(""),option.find("input[type=checkbox]").prop("checked",!1),option},this.recalculateSurveyItemsIndexes=function(){jQuery.each(jQuery(this.$tab.find('input[name^="survey_options[text_answer_enabled]"')),function(index,el){index=jQuery(el).attr("name").replace(/\[\d*\]$/,"["+index+"]");jQuery(el).attr("name",index)})}}($("#cancellation-offer-survey-tab")).init())});
